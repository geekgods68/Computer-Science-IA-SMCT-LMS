{% extends 'admin/sidebar.html' %}
{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;">
    <div>
        <div class="welcome-text">Welcome, admin!</div>
        <div class="page-title">Student Feedback</div>
    </div>
</div>

<!-- Flash Messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            <div style="background-color: {{ '#fee2e2' if category == 'error' else '#d1fae5' }}; border: 1px solid {{ '#f87171' if category == 'error' else '#10b981' }}; border-radius: 8px; padding: 16px; margin-bottom: 16px; color: {{ '#dc2626' if category == 'error' else '#065f46' }};">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
{% endwith %}

<!-- Filter Section -->
<div style="background-color: #3b82f6; color: white; padding: 16px 24px; font-size: 18px; font-weight: 500; margin-bottom: 24px; border-radius: 8px; display: flex; align-items: center; gap: 8px;">
    üìä Filter by Status
</div>

<div style="background-color: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 24px; margin-bottom: 32px;">
    <div style="display: flex; gap: 12px; flex-wrap: wrap;">
        <a href="{{ url_for('admin.view_feedback') }}" style="background-color: #6b7280; color: white; padding: 8px 16px; border-radius: 6px; text-decoration: none; font-size: 14px; display: flex; align-items: center; gap: 8px;">
            üìã All Feedback
        </a>
        <a href="{{ url_for('admin.view_feedback', status='pending') }}" style="background-color: #f59e0b; color: white; padding: 8px 16px; border-radius: 6px; text-decoration: none; font-size: 14px; display: flex; align-items: center; gap: 8px;">
            ‚è≥ Pending
        </a>
        <a href="{{ url_for('admin.view_feedback', status='reviewed') }}" style="background-color: #3b82f6; color: white; padding: 8px 16px; border-radius: 6px; text-decoration: none; font-size: 14px; display: flex; align-items: center; gap: 8px;">
            üëÅÔ∏è Reviewed
        </a>
        <a href="{{ url_for('admin.view_feedback', status='resolved') }}" style="background-color: #10b981; color: white; padding: 8px 16px; border-radius: 6px; text-decoration: none; font-size: 14px; display: flex; align-items: center; gap: 8px;">
            ‚úÖ Resolved
        </a>
    </div>
</div>

<!-- Statistics Section -->
<div style="background-color: #3b82f6; color: white; padding: 16px 24px; font-size: 18px; font-weight: 500; margin-bottom: 24px; border-radius: 8px; display: flex; align-items: center; gap: 8px;">
    üìà Feedback Statistics
</div>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 32px;">
    <div style="background-color: #3b82f6; color: white; padding: 24px; border-radius: 8px; text-align: center;">
        <div style="font-size: 2rem; margin-bottom: 8px;">üí¨</div>
        <div style="font-size: 2rem; font-weight: 600; margin-bottom: 4px;">{{ feedback_stats.total }}</div>
        <div style="font-size: 14px;">Total Feedback</div>
    </div>
    <div style="background-color: #f59e0b; color: white; padding: 24px; border-radius: 8px; text-align: center;">
        <div style="font-size: 2rem; margin-bottom: 8px;">‚è≥</div>
        <div style="font-size: 2rem; font-weight: 600; margin-bottom: 4px;">{{ feedback_stats.pending }}</div>
        <div style="font-size: 14px;">Pending Review</div>
    </div>
    <div style="background-color: #3b82f6; color: white; padding: 24px; border-radius: 8px; text-align: center;">
        <div style="font-size: 2rem; margin-bottom: 8px;">üëÅÔ∏è</div>
        <div style="font-size: 2rem; font-weight: 600; margin-bottom: 4px;">{{ feedback_stats.reviewed }}</div>
        <div style="font-size: 14px;">Reviewed</div>
    </div>
    <div style="background-color: #10b981; color: white; padding: 24px; border-radius: 8px; text-align: center;">
        <div style="font-size: 2rem; margin-bottom: 8px;">‚úÖ</div>
        <div style="font-size: 2rem; font-weight: 600; margin-bottom: 4px;">{{ feedback_stats.resolved }}</div>
        <div style="font-size: 14px;">Resolved</div>
    </div>
</div>

<!-- Search & Filter -->
<div style="background-color: #3b82f6; color: white; padding: 16px 24px; font-size: 18px; font-weight: 500; margin-bottom: 24px; border-radius: 8px; display: flex; align-items: center; gap: 8px;">
    üîç Search & Filter
</div>

<div style="background-color: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 24px; margin-bottom: 32px;">
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
        <div>
            <label style="display: block; font-size: 16px; font-weight: 500; color: #374151; margin-bottom: 8px;">Category</label>
            <select id="categoryFilter" style="width: 100%; padding: 12px 16px; font-size: 16px; border: 1px solid #d1d5db; border-radius: 6px; background-color: #ffffff; color: #6b7280;">
                <option value="">All Categories</option>
                <option value="academic">Academic</option>
                <option value="technical">Technical</option>
                <option value="general">General</option>
            </select>
        </div>
        <div>
            <label style="display: block; font-size: 16px; font-weight: 500; color: #374151; margin-bottom: 8px;">Rating</label>
            <select id="ratingFilter" style="width: 100%; padding: 12px 16px; font-size: 16px; border: 1px solid #d1d5db; border-radius: 6px; background-color: #ffffff; color: #6b7280;">
                <option value="">All Ratings</option>
                <option value="5">5 Stars</option>
                <option value="4">4 Stars</option>
                <option value="3">3 Stars</option>
                <option value="2">2 Stars</option>
                <option value="1">1 Star</option>
            </select>
        </div>
        <div>
            <label style="display: block; font-size: 16px; font-weight: 500; color: #374151; margin-bottom: 8px;">Date Range</label>
            <select id="dateFilter" style="width: 100%; padding: 12px 16px; font-size: 16px; border: 1px solid #d1d5db; border-radius: 6px; background-color: #ffffff; color: #6b7280;">
                <option value="">All Time</option>
                <option value="today">Today</option>
                <option value="week">This Week</option>
                <option value="month">This Month</option>
            </select>
        </div>
    </div>
</div>

<!-- Feedback List Section -->
<div style="background-color: #3b82f6; color: white; padding: 16px 24px; font-size: 18px; font-weight: 500; margin-bottom: 24px; border-radius: 8px; display: flex; align-items: center; gap: 8px;">
    üí¨ Student Feedback Submissions ({{ feedback_list|length }} total)
</div>

<!-- Instructions Card -->
<div style="background-color: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 8px; padding: 20px; margin-bottom: 24px;">
    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
        <div style="font-size: 1.5rem;">‚ÑπÔ∏è</div>
        <h4 style="color: #0369a1; margin: 0; font-size: 16px; font-weight: 600;">How to View Student Feedback</h4>
    </div>
    <div style="color: #075985; line-height: 1.6;">
        <p style="margin: 0 0 8px 0;">‚Ä¢ <strong>Feedback Preview:</strong> See the first 100 characters of each feedback submission in the table</p>
        <p style="margin: 0 0 8px 0;">‚Ä¢ <strong>View Full Feedback:</strong> Click the "üëÅÔ∏è View Full" button to read the complete feedback content in a detailed modal</p>
        <p style="margin: 0;">‚Ä¢ <strong>Student Information:</strong> Each feedback shows the student's username and ID (feedback is anonymous to students but trackable for admin purposes)</p>
    </div>
</div>

{% if feedback_list %}
<div style="background-color: white; border: 1px solid #e5e7eb; border-radius: 8px; overflow: hidden;">
    <table style="width: 100%; border-collapse: collapse;" id="feedbackTable">
        <thead>
            <tr style="background-color: #374151; color: white;">
                <th style="padding: 16px; text-align: left; font-weight: 600; border-right: 1px solid #4b5563;">Student</th>
                <th style="padding: 16px; text-align: left; font-weight: 600; border-right: 1px solid #4b5563;">Feedback Preview</th>
                <th style="padding: 16px; text-align: left; font-weight: 600; border-right: 1px solid #4b5563;">Rating</th>
                <th style="padding: 16px; text-align: left; font-weight: 600; border-right: 1px solid #4b5563;">Date</th>
                <th style="padding: 16px; text-align: left; font-weight: 600;">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for feedback in feedback_list %}
            <tr style="border-bottom: 1px solid #e5e7eb; {{ 'background-color: #f8f9fa;' if loop.index % 2 == 1 }}" data-category="{{ feedback[2] or '' }}" data-rating="{{ feedback[6] or '' }}" data-status="{{ feedback[10] or '' }}">
                <td style="padding: 16px; color: #374151; border-right: 1px solid #e5e7eb;">
                    <div style="font-weight: 500;">{{ feedback[14] or 'Anonymous Student' }}</div>
                    <div style="font-size: 12px; color: #6b7280;">ID: {{ feedback[1] }}</div>
                </td>
                <td style="padding: 16px; color: #374151; border-right: 1px solid #e5e7eb; max-width: 300px;">
                    <div style="line-height: 1.4; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                        {{ feedback[7][:100] }}{% if feedback[7]|length > 100 %}...{% endif %}
                    </div>
                    <div style="font-size: 12px; color: #6b7280; margin-top: 4px;">
                        Click "View Full" to read complete feedback
                    </div>
                </td>
                <td style="padding: 16px; border-right: 1px solid #e5e7eb;">
                    {% if feedback[6] %}
                        <div style="display: flex; align-items: center; gap: 4px;">
                            <span style="color: #f59e0b;">
                                {% for i in range(feedback[6]) %}‚≠ê{% endfor %}
                            </span>
                            <span style="color: #6b7280; font-size: 14px;">({{ feedback[6] }}/5)</span>
                        </div>
                    {% else %}
                        <span style="color: #9ca3af;">No rating</span>
                    {% endif %}
                </td>
                <td style="padding: 16px; color: #374151; border-right: 1px solid #e5e7eb;">
                    {% if feedback[9] %}
                        {{ feedback[9].split(' ')[0] }}
                        <div style="font-size: 12px; color: #6b7280;">{{ feedback[9].split(' ')[1][:5] if feedback[9].split(' ')|length > 1 }}</div>
                    {% else %}
                        N/A
                    {% endif %}
                </td>
                <td style="padding: 16px;">
                    <div style="display: flex; gap: 8px;">
                        <button onclick="viewFeedback({{ feedback[0] }})" style="background-color: #3b82f6; color: white; border: none; padding: 8px 12px; border-radius: 4px; font-size: 12px; cursor: pointer; display: flex; align-items: center; gap: 4px;">
                            üëÅÔ∏è View Full
                        </button>
                        <button onclick="respondToFeedback({{ feedback[0] }})" style="background-color: #10b981; color: white; border: none; padding: 8px 12px; border-radius: 4px; font-size: 12px; cursor: pointer; display: flex; align-items: center; gap: 4px;">
                            üí¨ Respond
                        </button>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div style="background-color: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 48px; text-align: center;">
    <div style="font-size: 4rem; margin-bottom: 16px; color: #9ca3af;">üìù</div>
    <div style="font-size: 18px; font-weight: 500; color: #374151; margin-bottom: 8px;">No feedback submissions yet</div>
    <div style="color: #6b7280;">Student feedback will appear here when submitted.</div>
</div>
{% endif %}

<!-- Response Modal -->
<div id="responseModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 1000;">
    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; border-radius: 8px; padding: 24px; min-width: 500px; max-width: 80%; max-height: 80%; overflow-y: auto; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);">
        <div style="margin-bottom: 16px;">
            <h3 style="font-size: 18px; font-weight: 600; color: #3b82f6; margin: 0; display: flex; align-items: center; gap: 8px;">
                üí¨ Respond to Feedback
            </h3>
        </div>
        <div id="responseContent">
            <div style="text-align: center; color: #6b7280;">Loading...</div>
        </div>
    </div>
</div>

<script>
// Filter functionality
document.addEventListener('DOMContentLoaded', function() {
    const categoryFilter = document.getElementById('categoryFilter');
    const ratingFilter = document.getElementById('ratingFilter');
    const dateFilter = document.getElementById('dateFilter');
    const table = document.getElementById('feedbackTable');
    
    if (table) {
        const rows = table.getElementsByTagName('tbody')[0].getElementsByTagName('tr');

        function filterTable() {
            const categoryValue = categoryFilter.value.toLowerCase();
            const ratingValue = ratingFilter.value;

            for (let i = 0; i < rows.length; i++) {
                const row = rows[i];
                const category = row.getAttribute('data-category').toLowerCase();
                const rating = row.getAttribute('data-rating');
                
                const categoryMatch = categoryValue === '' || category.includes(categoryValue);
                const ratingMatch = ratingValue === '' || rating === ratingValue;
                
                if (categoryMatch && ratingMatch) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            }
        }

        categoryFilter.addEventListener('change', filterTable);
        ratingFilter.addEventListener('change', filterTable);
        dateFilter.addEventListener('change', filterTable);
    }

    // Add focus styles for form elements
    const inputs = document.querySelectorAll('input, select');
    
    inputs.forEach(input => {
        input.addEventListener('focus', function() {
            this.style.borderColor = '#3b82f6';
            this.style.boxShadow = '0 0 0 3px rgba(59, 130, 246, 0.1)';
        });
        
        input.addEventListener('blur', function() {
            this.style.borderColor = '#d1d5db';
            this.style.boxShadow = 'none';
        });
    });
});

function viewFeedback(feedbackId) {
    // Show the modal
    const modal = document.getElementById('responseModal');
    const content = document.getElementById('responseContent');
    modal.style.display = 'block';
    content.innerHTML = '<div style="text-align: center; color: #6b7280;"><i class="spinner"></i> Loading feedback...</div>';
    
    // Fetch feedback details
    fetch(`/admin/get_feedback/${feedbackId}`)
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                content.innerHTML = `
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #374151; margin: 0 0 10px 0; font-size: 16px; font-weight: 600;">Feedback Details</h4>
                        <div style="background-color: #f9fafb; padding: 16px; border-radius: 6px; border-left: 4px solid #3b82f6;">
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #374151;">Student:</strong> 
                                <span style="color: #6b7280;">${data.feedback.username || 'Anonymous'}</span>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #374151;">Submitted:</strong> 
                                <span style="color: #6b7280;">${new Date(data.feedback.submitted_on).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' })}</span>
                            </div>
                            ${data.feedback.rating ? `
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #374151;">Rating:</strong> 
                                <span style="color: #f59e0b;">${'‚≠ê'.repeat(data.feedback.rating)} (${data.feedback.rating}/5)</span>
                            </div>
                            ` : ''}
                        </div>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #374151; margin: 0 0 10px 0; font-size: 16px; font-weight: 600;">Feedback Content</h4>
                        <div style="background-color: #f8f9fa; padding: 16px; border-radius: 6px; border: 1px solid #e9ecef; max-height: 200px; overflow-y: auto;">
                            <p style="margin: 0; line-height: 1.6; color: #374151; white-space: pre-wrap;">${data.feedback.feedback_text}</p>
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button onclick="closeModal()" style="background-color: #6b7280; color: white; border: none; padding: 10px 16px; border-radius: 4px; cursor: pointer;">
                            Close
                        </button>
                        <button onclick="markAsReviewed(${feedbackId})" style="background-color: #3b82f6; color: white; border: none; padding: 10px 16px; border-radius: 4px; cursor: pointer;">
                            Mark as Reviewed
                        </button>
                    </div>
                `;
            } else {
                content.innerHTML = `
                    <div style="text-align: center; color: #dc2626;">
                        <p>Error loading feedback details.</p>
                        <button onclick="closeModal()" style="background-color: #6b7280; color: white; border: none; padding: 10px 16px; border-radius: 4px; cursor: pointer;">Close</button>
                    </div>
                `;
            }
        })
        .catch(error => {
            content.innerHTML = `
                <div style="text-align: center; color: #dc2626;">
                    <p>Error loading feedback details.</p>
                    <button onclick="closeModal()" style="background-color: #6b7280; color: white; border: none; padding: 10px 16px; border-radius: 4px; cursor: pointer;">Close</button>
                </div>
            `;
        });
}

function closeModal() {
    const modal = document.getElementById('responseModal');
    modal.style.display = 'none';
}

function markAsReviewed(feedbackId) {
    fetch(`/admin/mark_feedback_reviewed/${feedbackId}`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            closeModal();
            location.reload(); // Refresh the page to update the status
        } else {
            alert('Error updating feedback status');
        }
    })
    .catch(error => {
        alert('Error updating feedback status');
    });
}

// Close modal when clicking outside
document.addEventListener('click', function(event) {
    const modal = document.getElementById('responseModal');
    if (event.target === modal) {
        closeModal();
    }
});

function respondToFeedback(feedbackId) {
    // Show the modal with response form
    const modal = document.getElementById('responseModal');
    const content = document.getElementById('responseContent');
    modal.style.display = 'block';
    content.innerHTML = '<div style="text-align: center; color: #6b7280;"><i class="spinner"></i> Loading feedback...</div>';
    
    // Fetch feedback details
    fetch(`/admin/get_feedback/${feedbackId}`)
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const feedback = data.feedback;
                const hasResponse = feedback.admin_response && feedback.admin_response.trim() !== '';
                
                content.innerHTML = `
                    <form method="POST" action="/admin/respond_to_feedback">
                        <input type="hidden" name="feedback_id" value="${feedbackId}">
                        
                        <!-- Feedback Details Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #374151; margin: 0 0 10px 0; font-size: 16px; font-weight: 600;">Feedback Details</h4>
                            <div style="background-color: #f9fafb; padding: 16px; border-radius: 6px; border-left: 4px solid #3b82f6;">
                                <div style="margin-bottom: 12px;">
                                    <strong style="color: #374151;">Student:</strong> 
                                    <span style="color: #6b7280;">${feedback.username || 'Anonymous'}</span>
                                </div>
                                <div style="margin-bottom: 12px;">
                                    <strong style="color: #374151;">Status:</strong> 
                                    <span style="color: ${feedback.status === 'pending' ? '#f59e0b' : (feedback.status === 'reviewed' ? '#3b82f6' : '#10b981')}; font-weight: 500; text-transform: capitalize;">
                                        ${feedback.status}
                                    </span>
                                </div>
                                <div style="margin-bottom: 12px;">
                                    <strong style="color: #374151;">Submitted:</strong> 
                                    <span style="color: #6b7280;">${new Date(feedback.submitted_on).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' })}</span>
                                </div>
                                ${feedback.rating ? `
                                <div style="margin-bottom: 12px;">
                                    <strong style="color: #374151;">Rating:</strong> 
                                    <span style="color: #f59e0b;">${'‚≠ê'.repeat(feedback.rating)} (${feedback.rating}/5)</span>
                                </div>
                                ` : ''}
                            </div>
                        </div>
                        
                        <!-- Original Feedback Content -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #374151; margin: 0 0 10px 0; font-size: 16px; font-weight: 600;">Student's Feedback</h4>
                            <div style="background-color: #f8f9fa; padding: 16px; border-radius: 6px; border: 1px solid #e9ecef; max-height: 150px; overflow-y: auto;">
                                <p style="margin: 0; line-height: 1.6; color: #374151; white-space: pre-wrap;">${feedback.feedback_text}</p>
                            </div>
                        </div>
                        
                        ${hasResponse ? `
                        <!-- Existing Response -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #374151; margin: 0 0 10px 0; font-size: 16px; font-weight: 600;">Previous Response</h4>
                            <div style="background-color: #f0f9ff; padding: 16px; border-radius: 6px; border: 1px solid #bfdbfe;">
                                <p style="margin: 0; line-height: 1.6; color: #1e40af; white-space: pre-wrap;">${feedback.admin_response}</p>
                                <small style="color: #6b7280; margin-top: 8px; display: block;">
                                    Responded on: ${new Date(feedback.response_date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' })}
                                </small>
                            </div>
                        </div>
                        ` : ''}
                        
                        <!-- Response Form -->
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151;">
                                ${hasResponse ? 'Update Response:' : 'Your Response:'}
                            </label>
                            <textarea name="admin_response" rows="4" required 
                                     placeholder="Type your response to the student's feedback here..."
                                     style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px; font-family: inherit; resize: vertical;">${hasResponse ? feedback.admin_response : ''}</textarea>
                            <small style="color: #6b7280; display: block; margin-top: 4px;">
                                This response will be visible to the student and helps them understand how their feedback is being addressed.
                            </small>
                        </div>
                        
                        <!-- Options -->
                        <div style="margin-bottom: 20px;">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="mark_resolved" style="margin: 0;">
                                <span style="color: #374151;">Mark this feedback as resolved (closes the feedback item)</span>
                            </label>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button type="button" onclick="closeModal()" 
                                    style="background-color: #6b7280; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-size: 14px;">
                                Cancel
                            </button>
                            <button type="submit" 
                                    style="background-color: #10b981; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500;">
                                üí¨ Send Response
                            </button>
                        </div>
                    </form>
                `;
                
                // Add form styling
                const textarea = content.querySelector('textarea');
                textarea.addEventListener('focus', function() {
                    this.style.borderColor = '#3b82f6';
                    this.style.boxShadow = '0 0 0 3px rgba(59, 130, 246, 0.1)';
                });
                
                textarea.addEventListener('blur', function() {
                    this.style.borderColor = '#d1d5db';
                    this.style.boxShadow = 'none';
                });
                
            } else {
                content.innerHTML = `
                    <div style="text-align: center; color: #dc2626;">
                        <p>Error loading feedback details: ${data.error}</p>
                        <button onclick="closeModal()" style="background-color: #6b7280; color: white; border: none; padding: 10px 16px; border-radius: 4px; cursor: pointer;">Close</button>
                    </div>
                `;
            }
        })
        .catch(error => {
            content.innerHTML = `
                <div style="text-align: center; color: #dc2626;">
                    <p>Error loading feedback details.</p>
                    <button onclick="closeModal()" style="background-color: #6b7280; color: white; border: none; padding: 10px 16px; border-radius: 4px; cursor: pointer;">Close</button>
                </div>
            `;
        });
}
</script>

<style>
button:hover, a:hover {
    opacity: 0.9;
    text-decoration: none !important;
}

input::placeholder {
    color: #9ca3af;
}

select:invalid {
    color: #9ca3af;
}

select option {
    color: #374151;
}

table tbody tr:hover {
    background-color: #f8f9fa !important;
}
</style>
{% endblock %}
