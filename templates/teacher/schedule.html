<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedule - Teacher Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body {
            background-color: #f5f5f5;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .navbar {
            background: linear-gradient(135deg, #28a745, #20c997) !important;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .navbar-brand {
            font-weight: 600;
            font-size: 1.2rem;
        }
        
        .content-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .page-title {
            color: #28a745;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .class-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 4px solid #28a745;
            transition: transform 0.2s;
        }
        
        .class-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }
        
        .class-card.no-schedule {
            border-left-color: #ffc107;
        }
        
        .class-title {
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .class-meta {
            color: #6c757d;
            font-size: 0.9rem;
            margin-bottom: 12px;
        }
        
        .schedule-info {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 15px;
        }
        
        .schedule-badge {
            background-color: #28a745;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-right: 8px;
        }
        
        .no-schedule-badge {
            background-color: #ffc107;
            color: #000;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        
        .pdf-viewer-container {
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .section-title {
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('teacher.dashboard') }}">
                <i class="bi bi-mortarboard me-2"></i>Teacher Dashboard
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="{{ url_for('teacher.dashboard') }}">
                    <i class="bi bi-house me-1"></i>Dashboard
                </a>
                <a class="nav-link" href="{{ url_for('auth.logout') }}">
                    <i class="bi bi-box-arrow-right me-1"></i>Logout
                </a>
            </div>
        </div>
    </nav>

    <div class="container my-4">
        <!-- Page Header -->
        <div class="content-card">
            <h2 class="page-title">
                <i class="bi bi-calendar-week"></i>My Class Schedules
            </h2>
            
            <!-- Statistics Overview -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="stat-card">
                        <div class="stat-number">{{ stats.total_classes }}</div>
                        <div class="stat-label">Total Classes</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card" style="background: linear-gradient(135deg, #28a745, #20c997);">
                        <div class="stat-number">{{ stats.classes_with_pdf }}</div>
                        <div class="stat-label">With Schedules</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card" style="background: linear-gradient(135deg, #ffc107, #ff8f00);">
                        <div class="stat-number">{{ stats.classes_without_pdf }}</div>
                        <div class="stat-label">Without Schedules</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card" style="background: linear-gradient(135deg, #17a2b8, #0c7b93);">
                        <div class="stat-number">{{ stats.total_students }}</div>
                        <div class="stat-label">Total Students</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Classes with Schedule Information -->
        {% if classes_with_schedules %}
        <div class="content-card">
            <h4 class="section-title">
                <i class="bi bi-calendar-check text-success"></i>Classes with Schedule Information
            </h4>
            
            {% for class in classes_with_schedules %}
            <div class="class-card">
                <div class="class-title">
                    <div>
                        {{ class.name }}
                        <span class="schedule-badge">
                            <i class="bi bi-calendar-check me-1"></i>Schedule Available
                        </span>
                    </div>
                </div>
                
                <div class="class-meta">
                    {% if class.subject %}
                        <i class="bi bi-book me-1"></i>{{ class.subject }}
                    {% endif %}
                    {% if class.grade_level %}
                        • <i class="bi bi-mortarboard me-1"></i>Grade {{ class.grade_level }}
                    {% endif %}
                    {% if class.section %}
                        • Section {{ class.section }}
                    {% endif %}
                    • <i class="bi bi-people me-1"></i>{{ class.student_count }} students
                    {% if class.description %}
                        • {{ class.description }}
                    {% endif %}
                </div>
                
                {% if class.schedule_days or class.schedule_time_start %}
                <div class="schedule-info">
                    <strong>Schedule Details:</strong><br>
                    {% if class.schedule_days %}
                        <i class="bi bi-calendar me-1"></i>{{ class.schedule_days }}
                    {% endif %}
                    {% if class.schedule_time_start and class.schedule_time_end %}
                        <br><i class="bi bi-clock me-1"></i>{{ class.schedule_time_start }} - {{ class.schedule_time_end }}
                    {% endif %}
                </div>
                {% endif %}
                
                <div class="mt-3">
                    <a href="{{ url_for('teacher.my_classes') }}" class="btn btn-sm btn-outline-primary">
                        <i class="bi bi-eye me-1"></i>View Class Details
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Classes without Schedule Information -->
        {% if classes_without_schedules %}
        <div class="content-card">
            <h4 class="section-title">
                <i class="bi bi-exclamation-triangle text-warning"></i>Classes without Schedule Information
            </h4>
            
            {% for class in classes_without_schedules %}
            <div class="class-card no-schedule">
                <div class="class-title">
                    <div>
                        {{ class.name }}
                        <span class="no-schedule-badge">
                            <i class="bi bi-exclamation-triangle me-1"></i>No Schedule
                        </span>
                    </div>
                </div>
                
                <div class="class-meta">
                    {% if class.subject %}
                        <i class="bi bi-book me-1"></i>{{ class.subject }}
                    {% endif %}
                    {% if class.grade_level %}
                        • <i class="bi bi-mortarboard me-1"></i>Grade {{ class.grade_level }}
                    {% endif %}
                    {% if class.section %}
                        • Section {{ class.section }}
                    {% endif %}
                    • <i class="bi bi-people me-1"></i>{{ class.student_count }} students
                    {% if class.description %}
                        • {{ class.description }}
                    {% endif %}
                </div>
                
                <div class="alert alert-warning mb-0">
                    <i class="bi bi-info-circle me-1"></i>
                    No schedule posted yet for this class. Contact the administrator to set up a schedule.
                </div>
                
                <div class="mt-3">
                    <a href="{{ url_for('teacher.my_classes') }}" class="btn btn-sm btn-outline-primary">
                        <i class="bi bi-eye me-1"></i>View Class Details
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Empty State -->
        {% if not classes_with_schedules and not classes_without_schedules %}
        <div class="content-card">
            <div class="text-center py-5">
                <i class="bi bi-calendar-x" style="font-size: 3rem; color: #6c757d;"></i>
                <h5 class="mt-3 text-muted">No Classes Assigned</h5>
                <p class="text-muted">You don't have any classes assigned to you yet.</p>
                <a href="{{ url_for('teacher.dashboard') }}" class="btn btn-success">
                    <i class="bi bi-arrow-left me-1"></i>Back to Dashboard
                </a>
            </div>
        </div>
        {% endif %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
